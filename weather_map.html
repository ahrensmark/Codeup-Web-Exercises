<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>San Antonio Weather</title>

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css" integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS" crossorigin="anonymous">
    <link rel="stylesheet" href="css/weather_map.css">
</head>
<!--Create a new HTML file called weather_map.html.-->

<!--Using HTML, CSS, jQuery, Ajax, and the Dark Sky API, start by showing the current conditions for San Antonio on your page.-->

<!--Update your layout and Ajax request(s) to display a three-day forecast for San Antonio that looks like the screenshot below, minus icons.-->

<!--3 Day Forecast-->

<!--Include icons:-->
<!--Download the weather icons of your choosing locally and store in a folder in your project called icon. Climacons would be a great choice.-->

<!--Create an array of JS objects containing a property for each of the following conditions: clear-day, clear-night, rain, snow, sleet, wind, fog, cloudy, partly-cloudy-day, partly-cloudy-night.-->

<!--Add a property to the array of icon objects for the url to the location that the appropriate icon is stored locally.-->

<!--Use jQuery to add any icons needed to the document.-->

<!--Create input boxes for "Latitude" and "Longitude" and a <button> that will take the values from those inputs and feed them into your API request.-->

<!--    Refer back to your Mapbox Maps API exercise. Recreate the map below your three-day forecast. Draw the map with a draggable marker starting on San Antonio. Once the user stops dragging the pin, grab its coordinates and feed those into your Dark Sky API. Update the three-day forecast with the information from those coordinates (you should also get rid of your input boxes at this point).-->

<!--    3 Day Forecast Map-->

<!--    Add a Mapbox text input to search by location and have the forecast update when a new location is searched.-->

<!--    As you complete each step, commit your changes and push them to GitHub.-->
<body>
    <div></div>
        <h1 id="moveRight">Weather Application</h1>
        <h2>For San Antonio Texas</h2>
    <br>
    <div class="container">
        <div class="row text-center" id="forecastInfo">
<!--            <div class="col-4">yes</div>-->
<!--            <div class="col-4">no</div>-->


        </div>
    </div>

    <br>
    <button id="weather1">Click to update</button>
    <script src="js/keys.js"></script>
    <script src="js/jquery.js"></script>
    <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.53.0/mapbox-gl.js'></script>
    <script src="js/mapbox-geocoder-utils.js"></script>
    <script>
        (function() {
            "use strict";
            function updatePage() {
                //get request for forecast data
                $.get("https://cors-anywhere.herokuapp.com/https://api.darksky.net/forecast/" + darkSkyToken + "/29.4241,-98.4936").done(function(data) {
                    var html = buildHTML(data);
                    console.log(data);
                    // var dateObject = new Date(data.currently.time * 1000);
                    // console.log(dateObject);

                    $('#forecastInfo').html(html);
                });
            }

        //build current weather
            updatePage();
            // function buildHTML(current) {
            //     console.log(current.currently);
            //     console.log(current.currently.temperature);
            //     var todayHTML = "";
            //         todayHTML +=  "<div>" + "<h2>" + current.currently.temperature.toFixed(0) + "</h2>" + "</div>";
            //         todayHTML +=  "<div>" +  current.currently.summary + "</div>";
            //         todayHTML +=  "<div>" + "<b>Humidity: </b>" + current.currently.humidity * 100 + "%" + "</div>";
            //         todayHTML +=  "<div>" + "<b>Wind Speed: </b>" + current.currently.windSpeed.toFixed(0) + "</div>";
            //         todayHTML +=  "<div>" +  "<b>Pressure: </b>" +current.currently.pressure + "</div>";
            //
            //     return todayHTML;
            // }
            $('#weather1').click(updatePage);

        //Build 3 day forecast
            function buildHTML(forecast) {
                var forecastsHTML = "";
                for (var i = 0; i < 3; i++) {
                    forecastsHTML += "<div class='col-4 border border-dark' id='bgColor'> <h3>" + forecast.daily.data[i].temperatureHigh.toFixed(0) + "°" + "/" + forecast.daily.data[i].temperatureLow.toFixed(0) + "°" + "</h3>";
                    forecastsHTML += "<p>" + 'Humidity: ' + forecast.daily.data[i].humidity + "</p>";
                    forecastsHTML += "<p>" + 'Humidity: ' + forecast.daily.data[i].humidity + "</p>";
                    forecastsHTML += "<p>" + 'Wind: ' + forecast.daily.data[i].wind + "</p>";
                    forecastsHTML += "<p>" + 'Pressure: ' + forecast.daily.data[i].pressure + "</p></div>";


                }
                return forecastsHTML;
            }


    })();
    </script>
</body>
</html>